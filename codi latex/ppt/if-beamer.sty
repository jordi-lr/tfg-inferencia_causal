%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                                    							
%% 	LaTeX Style File for typesetting TEI-Pel thesis presentations
%% 	Created by John Liaperdos, October 2014 - April 2015 
%%	[ioannis.liaperdos@gmail.com]
%%   
%%  version 1.0 (English)
%%
%%  Last update: 22/06/2017
%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Disclaimer: Use at your own risk

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{TeiPel_En_Beamer_Layout}[22/06/2017 TeiPel Beamer Layout Package (English version)]

\usepackage{xstring}
\usepackage{calculator}

% --------------------------------------------------- %
%                   Basic colors	                  %
% --------------------------------------------------- %
%%% From http://latexcolor.com/

% Blue
\definecolor{applegreen}{rgb}{0.55, 0.71, 0.0}

% Black and white
\definecolor{black}{rgb}{0.0, 0.0, 0.0}
\definecolor{white}{rgb}{1.0, 1.0, 1.0}

\definecolor{customBlockColor}{RGB}{200,228,250}
\definecolor{customAlertColor}{RGB}{31,112,173}

\definecolor{verdUAB}{RGB}{0,126,17}
\definecolor{marroUAB}{RGB}{169,85,33}
\edef\logopng{uab.png}


\newcommand{\setTeipelLayout}[1]{
	% choose Beamer theme
		%\usetheme{Antibes}
		%\usetheme{Warsaw} %<-- well known blue theme
		%\usetheme{default}\usecolortheme{beaver}%\useoutertheme{default}
		%\usetheme{PaloAlto}
		%\usetheme{Warsaw}
		\usetheme{Berlin}\useoutertheme{infolines}
		%\usecolortheme{seahorse}
		%\usecolortheme{rose}
		%\usetheme{Berkeley}
		%\usetheme{boxes}
		%\usetheme{Bergen}
		%\usetheme{CambridgeUS} 
		%\usetheme{Copenhagen}
		%\usetheme{Darmstadt}
		%\usetheme{Dresden}
		%\usetheme{Frankfurt}
		%\usetheme{Goettingen} 
		%\usetheme{Hannover}
		%\usetheme{Ilmenau}
		%\usetheme{JuanLesPins}
		%\usetheme{Luebeck}
		%\usetheme{Madrid}
		%\usetheme{Malmoe}
		%\usetheme{Marburg} 
		%\usetheme{Montpellier}
		%\usetheme{Pittsburgh}
		%\usetheme{Rochester}
		%\usetheme{Singapore} 
		%\usetheme{Szeged}
		%\usetheme{Boadilla}
		%\usetheme{AnnArbor}
    
        \setbeamersize{text margin left=8mm,text margin right=8mm} 
        
        \colorlet{primary_color}{verdUAB}
        \colorlet{secondary_color}{applegreen} % marroUAB
		
		\setbeamercolor{alerted text}{fg=red}
		\setbeamercolor{background canvas}{bg=white}
		\setbeamercolor{block body alerted}{bg=white, fg=red}
		\setbeamercolor{block body}{bg=primary_color!30}
		\setbeamercolor{block body example}{fg=primary_color!60!black, bg=gray!30}
		\setbeamercolor{block title alerted}{fg=white, bg=red}
		\setbeamercolor{block title}{bg=primary_color}
		\setbeamercolor{block title example}{bg=primary_color!70!black,fg=white}
		\setbeamercolor{fine separation line}{}
		\setbeamercolor{frametitle}{fg=white}
		\setbeamercolor{item projected}{fg=white}
		\setbeamercolor{normal text}{bg=primary_color!60,fg=primary_color!60!black}
		\setbeamercolor{palette sidebar primary}{use=normal text,fg=normal text.fg}
		\setbeamercolor{palette sidebar quaternary}{use=structure,fg=structure.fg}
		\setbeamercolor{palette sidebar secondary}{use=structure,fg=structure.fg}
		\setbeamercolor{palette sidebar tertiary}{use=normal text,fg=normal text.fg}
		\setbeamercolor{section in sidebar}{fg=brown}
		\setbeamercolor{section in sidebar shaded}{fg=gray}
		\setbeamercolor{section in toc}{fg=normal text.fg, bg=normal text.bg}
		\setbeamercolor{separation line}{}
		\setbeamercolor{sidebar}{bg=red}
		\setbeamercolor{sidebar}{parent=palette primary}
		\setbeamercolor{structure}{bg=primary_color, fg=primary_color}
		\setbeamercolor{subsection in sidebar}{fg=brown}
		\setbeamercolor{subsection in sidebar shaded}{fg=gray}
		\setbeamercolor{subsection in toc}{fg=normal text.fg, bg=normal text.bg}
		\setbeamercolor{title}{fg=white}
		\setbeamercolor{titlelike}{fg=brown}
		\setbeamercolor{itemize item}{fg=primary_color}
        \setbeamercolor{title in head/foot}{bg=secondary_color}%primary_color!40!black}
        \setbeamercolor{section in head/foot}{bg=secondary_color!80!white}
        \setbeamercolor{subsection in head/foot}{bg=secondary_color!60!black}
        \setbeamercolor{author in head/foot}{bg=secondary_color!80!white}
        \setbeamercolor{institute in head/foot}{bg=secondary_color}
        \setbeamercolor{number in head/foot}{bg=secondary_color!80!black,fg=white}
		%\setbeamercolor*{bibliography entry title}{fg=black}
		%\setbeamercolor*{bibliography entry author}{fg=black}
		\setbeamercolor*{bibliography entry location}{fg=primary_color}
		\setbeamercolor*{bibliography entry note}{fg=black}
		
		% Give a slight yellow tint to the notes page
        %\setbeamertemplate{note page}{\pagecolor{yellow!5}\insertnote}
	% remove beamer's navigation bar	
	    \setbeamertemplate{footline}{
          \leavevmode%
          \hbox{%
          \begin{beamercolorbox}[wd=.3\paperwidth,ht=2.5ex,dp=1ex,right]{author in head/foot}%
            \usebeamerfont{author in head/foot}\insertshortauthor\hspace*{2ex}
          \end{beamercolorbox}%
          \begin{beamercolorbox}[wd=.6\paperwidth,ht=2.5ex,dp=1ex,left]{institute in head/foot}%
            \usebeamerfont{title in head/foot}
            \hspace*{2ex}\insertshorttitle
          \end{beamercolorbox}%
          \begin{beamercolorbox}[wd=.10\paperwidth,ht=2.5ex,dp=1ex,right]{number in head/foot}%
            \usebeamerfont{author in head/foot}\insertframenumber{} / \inserttotalframenumber\hspace*{1ex}
          \end{beamercolorbox}}%
          \vskip0pt%
        }
		\setbeamertemplate{navigation symbols}{}
		\setbeamertemplate{headline}{
          \leavevmode%
          \hbox{%
          \begin{beamercolorbox}[wd=.4\paperwidth,ht=2.25ex,dp=1ex,right]{title in head/foot}%
             \usebeamerfont{section in head/foot}\insertsectionhead\hspace*{2ex}
          \end{beamercolorbox}%
          \begin{beamercolorbox}[wd=.6\paperwidth,ht=2.25ex,dp=1ex,left]{section in head/foot}%
             \usebeamerfont{subsection in head/foot}\hspace*{2ex}\insertsubsectionhead
             %\ifstrequal{\insertsubsectionhead}{v.s.}{ - \insertsubsectionhead}{}
          \end{beamercolorbox}}%
          % uncomment to add subsection
            %\begin{beamercolorbox}[wd=.3\paperwidth,ht=2.25ex,dp=1ex,left]{subsection in head/foot}%
            % \usebeamerfont{subsection in head/foot}\hspace*{2ex}\insertsubsectionhead
             %\ifstrequal{\insertsubsectionhead}{v.s.}{ - \insertsubsectionhead}{}
          %\end{beamercolorbox}}%
          \vskip0pt%
        }
	   
	% Table of contents before each Section
	\IfSubStr{#1}{hide-section-frames}{}{
		\AtBeginSection[]{
		  \frame<beamer>{ 
		    \frametitle{Contents}   
		    \tableofcontents[currentsection]%,currentsubsection] 
		  }
		}
	}
    % Add draft watermark
    \IfSubStr{#1}{draft}%
    	{%
        	\usepackage{tikz}%
    		\setbeamertemplate{background}{%
            	\begin{tikzpicture}[remember picture, overlay]
        			\node[rotate=90, anchor=west, xshift=10pt, yshift=-10pt] at (current page.south west){\textcolor{gray!60}{\emph{DRAFT - \today}}};%
            	\end{tikzpicture}%
            }%
             %   Comment to completely cover next transparencies %%
		    \setbeamercovered{transparent=20}
        }{}
}


% format multiple author names in title page
\makeatletter
	\long\def\beamer@author[#1]#2{%
  	\def\insertauthor{\def\inst{\beamer@insttitle}%
    \def\and{\beamer@andtitle}%
	\noexpandarg\StrCount{#2}{\and}[\numberofauthorsminusone]%
	\ADD{1}{\numberofauthorsminusone}{\numberofauthors}%
	\DIVIDE{1}{\numberofauthors}{\columnwidthfactor}%
	\renewcommand\and{\column{\columnwidthfactor\textwidth}\centering}%
	\begin{columns}[t,onlytextwidth]%
		\column{\columnwidthfactor\textwidth}\centering%
		#2%
	\end{columns}%
    }%
  	\def\beamer@shortauthor{#1}%
  	\ifbeamer@autopdfinfo%
    	\def\beamer@andstripped{}%
    	\beamer@stripands#1 \and\relax
    	{\let\inst=\@gobble\let\thanks=\@gobble%
        \def\and{, }\hypersetup{pdfauthor={\beamer@andstripped}}}
  	\fi%
}
\makeatother

\endinput